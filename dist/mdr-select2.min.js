!function(){"use strict";angular.module("mdr.select2",[]).directive("mdrSelect2",[function(){return{restrict:"E",scope:{url:"@",src:"=",options:"@",model:"=",selected:"=",placeholder:"@",disabled:"="},controller:"mdrSelect2Ctrl",template:'<select class="form-control select2" id="selectId_{{$id}}" ng-options="{{options}}" ng-model="model" data-placeholder="{{placeholder}}" ng-disabled="disabled"><option></option></select>'}}]).controller("mdrSelect2Ctrl",["$scope","$element","$attrs","mdrSelect2Service",function(e,t,c,n){function o(){setTimeout(function(){$("#selectId_"+e.$id).select2()},0),void 0!==c.required&&$("#selectId_"+e.$id).attr("required","required")}function i(t){var c=r();n.find(t).then(function(t){e[c.collection]=t,o(),void 0!==e.selected&&l(e.selected)})}function l(t){var c=r();angular.forEach(e[c.collection],function(n,o){return t==n[c.track]?(e.model=n,setTimeout(function(){$("#selectId_"+e.$id).val(t).trigger("change")},0),!1):void 0})}function r(){var t=e.options.split(" "),c=t.indexOf("in"),n=t.indexOf("track"),o=t[n+2].split("."),i={collection:t[c+1],track:o[1]};return i}e.placeholder="Seleccionar",o(),e.$watch("url",function(e,t){void 0!==e&&i(e)}),e.$watch("src",function(t,c){if(void 0!==t){var n=r();e[n.collection]=t,void 0!==e.selected&&l(e.selected)}}),e.$watch("selected",function(e,t){void 0!==e&&l(e)}),e.$watch("model",function(t,c){void 0!==t&&null!==t&&0===Object.keys(t).length&&setTimeout(function(){$("#selectId_"+e.$id).val(null).trigger("change")},0)})}]).factory("mdrSelect2Service",["$http","$q",function(e,t){return{find:function(c){var n=t.defer();return e.get(c).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}}}])}();